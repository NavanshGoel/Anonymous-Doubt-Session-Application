{"ast":null,"code":"var querystring = require('querystring');\n\nvar got = require('got');\n\nvar languages = require('./languages');\n\nfunction extract(key, res) {\n  var re = new RegExp(`\"${key}\":\".*?\"`);\n  var result = re.exec(res.body);\n\n  if (result !== null) {\n    return result[0].replace(`\"${key}\":\"`, '').slice(0, -1);\n  }\n\n  return '';\n}\n\nfunction translate(text, opts, gotopts) {\n  opts = opts || {};\n  gotopts = gotopts || {};\n  var e;\n  [opts.from, opts.to].forEach(function (lang) {\n    if (lang && !languages.isSupported(lang)) {\n      e = new Error();\n      e.code = 400;\n      e.message = 'The language \\'' + lang + '\\' is not supported';\n    }\n  });\n\n  if (e) {\n    return new Promise(function (resolve, reject) {\n      reject(e);\n    });\n  }\n\n  opts.from = opts.from || 'auto';\n  opts.to = opts.to || 'en';\n  opts.tld = opts.tld || 'com';\n  opts.from = languages.getCode(opts.from);\n  opts.to = languages.getCode(opts.to);\n  var url = 'https://translate.google.' + opts.tld;\n  return got(url, gotopts).then(function (res) {\n    var data = {\n      'rpcids': 'MkEWBc',\n      'f.sid': extract('FdrFJe', res),\n      'bl': extract('cfb2h', res),\n      'hl': 'en-US',\n      'soc-app': 1,\n      'soc-platform': 1,\n      'soc-device': 1,\n      '_reqid': Math.floor(1000 + Math.random() * 9000),\n      'rt': 'c'\n    };\n    return data;\n  }).then(function (data) {\n    url = url + '/_/TranslateWebserverUi/data/batchexecute?' + querystring.stringify(data);\n    gotopts.body = 'f.req=' + encodeURIComponent(JSON.stringify([[['MkEWBc', JSON.stringify([[text, opts.from, opts.to, true], [null]]), null, 'generic']]])) + '&';\n    gotopts.headers['content-type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n    return got.post(url, gotopts).then(function (res) {\n      var json = res.body.slice(6);\n      var length = '';\n      var result = {\n        text: '',\n        pronunciation: '',\n        from: {\n          language: {\n            didYouMean: false,\n            iso: ''\n          },\n          text: {\n            autoCorrected: false,\n            value: '',\n            didYouMean: false\n          }\n        },\n        raw: ''\n      };\n\n      try {\n        length = /^\\d+/.exec(json)[0];\n        json = JSON.parse(json.slice(length.length, parseInt(length, 10) + length.length));\n        json = JSON.parse(json[0][2]);\n        result.raw = json;\n      } catch (e) {\n        return result;\n      }\n\n      if (json[1][0][0][5] === undefined || json[1][0][0][5] === null) {\n        // translation not found, could be a hyperlink or gender-specific translation?\n        result.text = json[1][0][0][0];\n      } else {\n        json[1][0][0][5].forEach(function (obj) {\n          if (obj[0]) {\n            result.text += obj[0];\n          }\n        });\n      }\n\n      result.pronunciation = json[1][0][0][1]; // From language\n\n      if (json[0] && json[0][1] && json[0][1][1]) {\n        result.from.language.didYouMean = true;\n        result.from.language.iso = json[0][1][1][0];\n      } else if (json[1][3] === 'auto') {\n        result.from.language.iso = json[2];\n      } else {\n        result.from.language.iso = json[1][3];\n      } // Did you mean & autocorrect\n\n\n      if (json[0] && json[0][1] && json[0][1][0]) {\n        var str = json[0][1][0][0][1];\n        str = str.replace(/<b>(<i>)?/g, '[');\n        str = str.replace(/(<\\/i>)?<\\/b>/g, ']');\n        result.from.text.value = str;\n\n        if (json[0][1][0][2] === 1) {\n          result.from.text.autoCorrected = true;\n        } else {\n          result.from.text.didYouMean = true;\n        }\n      }\n\n      return result;\n    }).catch(function (err) {\n      err.message += `\\nUrl: ${url}`;\n\n      if (err.statusCode !== undefined && err.statusCode !== 200) {\n        err.code = 'BAD_REQUEST';\n      } else {\n        err.code = 'BAD_NETWORK';\n      }\n\n      throw err;\n    });\n  });\n}\n\nmodule.exports = translate;\nmodule.exports.languages = languages;","map":{"version":3,"sources":["/Users/kanavmittal/Downloads/Anonymous-Doubt-Session-Application-Ashank-App/node_modules/@vitalets/google-translate-api/index.js"],"names":["querystring","require","got","languages","extract","key","res","re","RegExp","result","exec","body","replace","slice","translate","text","opts","gotopts","e","from","to","forEach","lang","isSupported","Error","code","message","Promise","resolve","reject","tld","getCode","url","then","data","Math","floor","random","stringify","encodeURIComponent","JSON","headers","post","json","length","pronunciation","language","didYouMean","iso","autoCorrected","value","raw","parse","parseInt","undefined","obj","str","catch","err","statusCode","module","exports"],"mappings":"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","sourcesContent":["var querystring = require('querystring');\n\nvar got = require('got');\n\nvar languages = require('./languages');\n\nfunction extract(key, res) {\n    var re = new RegExp(`\"${key}\":\".*?\"`);\n    var result = re.exec(res.body);\n    if (result !== null) {\n        return result[0].replace(`\"${key}\":\"`, '').slice(0, -1);\n    }\n    return '';\n}\n\nfunction translate(text, opts, gotopts) {\n    opts = opts || {};\n    gotopts = gotopts || {};\n    var e;\n    [opts.from, opts.to].forEach(function (lang) {\n        if (lang && !languages.isSupported(lang)) {\n            e = new Error();\n            e.code = 400;\n            e.message = 'The language \\'' + lang + '\\' is not supported';\n        }\n    });\n    if (e) {\n        return new Promise(function (resolve, reject) {\n            reject(e);\n        });\n    }\n\n    opts.from = opts.from || 'auto';\n    opts.to = opts.to || 'en';\n    opts.tld = opts.tld || 'com';\n\n    opts.from = languages.getCode(opts.from);\n    opts.to = languages.getCode(opts.to);\n\n    var url = 'https://translate.google.' + opts.tld;\n    return got(url, gotopts).then(function (res) {\n        var data = {\n            'rpcids': 'MkEWBc',\n            'f.sid': extract('FdrFJe', res),\n            'bl': extract('cfb2h', res),\n            'hl': 'en-US',\n            'soc-app': 1,\n            'soc-platform': 1,\n            'soc-device': 1,\n            '_reqid': Math.floor(1000 + (Math.random() * 9000)),\n            'rt': 'c'\n        };\n\n        return data;\n    }).then(function (data) {\n        url = url + '/_/TranslateWebserverUi/data/batchexecute?' + querystring.stringify(data);\n        gotopts.body = 'f.req=' + encodeURIComponent(JSON.stringify([[['MkEWBc', JSON.stringify([[text, opts.from, opts.to, true], [null]]), null, 'generic']]])) + '&';\n        gotopts.headers['content-type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n\n        return got.post(url, gotopts).then(function (res) {\n            var json = res.body.slice(6);\n            var length = '';\n\n            var result = {\n                text: '',\n                pronunciation: '',\n                from: {\n                    language: {\n                        didYouMean: false,\n                        iso: ''\n                    },\n                    text: {\n                        autoCorrected: false,\n                        value: '',\n                        didYouMean: false\n                    }\n                },\n                raw: ''\n            };\n\n            try {\n                length = /^\\d+/.exec(json)[0];\n                json = JSON.parse(json.slice(length.length, parseInt(length, 10) + length.length));\n                json = JSON.parse(json[0][2]);\n                result.raw = json;\n            } catch (e) {\n                return result;\n            }\n\n            if (json[1][0][0][5] === undefined || json[1][0][0][5] === null) {\n                // translation not found, could be a hyperlink or gender-specific translation?\n                result.text = json[1][0][0][0];\n            } else {\n                json[1][0][0][5].forEach(function (obj) {\n                    if (obj[0]) {\n                        result.text += obj[0];\n                    }\n                });\n            }\n            result.pronunciation = json[1][0][0][1];\n\n            // From language\n            if (json[0] && json[0][1] && json[0][1][1]) {\n                result.from.language.didYouMean = true;\n                result.from.language.iso = json[0][1][1][0];\n            } else if (json[1][3] === 'auto') {\n                result.from.language.iso = json[2];\n            } else {\n                result.from.language.iso = json[1][3];\n            }\n\n            // Did you mean & autocorrect\n            if (json[0] && json[0][1] && json[0][1][0]) {\n                var str = json[0][1][0][0][1];\n\n                str = str.replace(/<b>(<i>)?/g, '[');\n                str = str.replace(/(<\\/i>)?<\\/b>/g, ']');\n\n                result.from.text.value = str;\n\n                if (json[0][1][0][2] === 1) {\n                    result.from.text.autoCorrected = true;\n                } else {\n                    result.from.text.didYouMean = true;\n                }\n            }\n\n            return result;\n        }).catch(function (err) {\n            err.message += `\\nUrl: ${url}`;\n            if (err.statusCode !== undefined && err.statusCode !== 200) {\n                err.code = 'BAD_REQUEST';\n            } else {\n                err.code = 'BAD_NETWORK';\n            }\n            throw err;\n        });\n    });\n}\n\nmodule.exports = translate;\nmodule.exports.languages = languages;\n"]},"metadata":{},"sourceType":"script"}