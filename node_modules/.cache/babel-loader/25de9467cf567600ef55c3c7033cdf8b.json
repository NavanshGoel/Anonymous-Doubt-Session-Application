{"ast":null,"code":"import _objectSpread from\"/Users/kanavmittal/Downloads/Anonymous-Doubt-Session-Application-Ashank-App/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import AdminMessage from\"./AdminMessage\";import StudentMessage from\"./StudentMessage\";import MessageForm from\"./MessageForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatFeed=function ChatFeed(props){var chats=props.chats,activeChat=props.activeChat,userName=props.userName,messages=props.messages;var chat=chats&&chats[activeChat];var renderReadReceipts=function renderReadReceipts(message,isAdminMessage){return chat.people.map(function(person,index){return person.last_read===message.id&&/*#__PURE__*/_jsx(\"div\",{className:\"read-receipt\",style:{float:isAdminMessage?\"right\":\"left\",backgroundImage:person.person.avatar&&\"url(\".concat(person.person.avatar,\")\")}},\"read_\".concat(index));});};var renderMessages=function renderMessages(){var keys=Object.keys(messages);return keys.map(function(key,index){var message=messages[key];var lastMessageKey=index===0?null:keys[index-1];var isAdminMessage=userName===message.sender.username;return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-block\",children:isAdminMessage?/*#__PURE__*/_jsx(AdminMessage,{message:message}):/*#__PURE__*/_jsx(StudentMessage,{message:message,lastMessage:messages[lastMessageKey]})}),/*#__PURE__*/_jsx(\"div\",{className:\"read-receipts\",style:{marginRight:isAdminMessage?\"18px\":\"0px\",marginLeft:isAdminMessage?\"0px\":\"68px\"},children:renderReadReceipts(message,isAdminMessage)})]},\"msg_\".concat(index));});};if(!chat)return/*#__PURE__*/_jsx(\"div\",{});return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-feed\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-title-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-title\",children:chat===null||chat===void 0?void 0:chat.title}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-subtitle\"})]}),renderMessages(),/*#__PURE__*/_jsx(\"div\",{style:{height:\"100px\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"message-form-container\",children:/*#__PURE__*/_jsx(MessageForm,_objectSpread(_objectSpread({},props),{},{chatId:activeChat}))})]});};export default ChatFeed;","map":{"version":3,"sources":["/Users/kanavmittal/Downloads/Anonymous-Doubt-Session-Application-Ashank-App/src/components/ChatFeed.jsx"],"names":["AdminMessage","StudentMessage","MessageForm","ChatFeed","props","chats","activeChat","userName","messages","chat","renderReadReceipts","message","isAdminMessage","people","map","person","index","last_read","id","float","backgroundImage","avatar","renderMessages","keys","Object","key","lastMessageKey","sender","username","width","marginRight","marginLeft","title","height"],"mappings":"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","sourcesContent":["import AdminMessage from \"./AdminMessage\";\nimport StudentMessage from \"./StudentMessage\";\nimport MessageForm from \"./MessageForm\";\n\nconst ChatFeed = (props) => {\n  const { chats, activeChat, userName, messages } = props;\n  const chat = chats && chats[activeChat];\n\n  const renderReadReceipts = (message, isAdminMessage) =>\n    chat.people.map(\n      (person, index) =>\n        person.last_read === message.id && (\n          <div\n            key={`read_${index}`}\n            className=\"read-receipt\"\n            style={{\n              float: isAdminMessage ? \"right\" : \"left\",\n              backgroundImage:\n                person.person.avatar && `url(${person.person.avatar})`,\n            }}\n          />\n        )\n    );\n\n  const renderMessages = () => {\n    const keys = Object.keys(messages);\n    return keys.map((key, index) => {\n      const message = messages[key];\n      const lastMessageKey = index === 0 ? null : keys[index - 1];\n      const isAdminMessage = userName === message.sender.username;\n      return (\n        <div key={`msg_${index}`} style={{ width: \"100%\" }}>\n          <div className=\"message-block\">\n            {isAdminMessage ? (\n              <AdminMessage message={message} />\n            ) : (\n              <StudentMessage\n                message={message}\n                lastMessage={messages[lastMessageKey]}\n              />\n            )}\n          </div>\n          <div\n            className=\"read-receipts\"\n            style={{\n              marginRight: isAdminMessage ? \"18px\" : \"0px\",\n              marginLeft: isAdminMessage ? \"0px\" : \"68px\",\n            }}\n          >\n            {renderReadReceipts(message, isAdminMessage)}\n          </div>\n        </div>\n      );\n    });\n  };\n\n  if (!chat) return <div />;\n\n  return (\n    <div className=\"chat-feed\">\n      <div className=\"chat-title-container\">\n        <div className=\"chat-title\">{chat?.title}</div>\n        <hr />\n        <div className=\"chat-subtitle\">\n          {/* {chat.people.map((person) => ` ${person.person.username}`)} */}\n        </div>\n      </div>\n      {renderMessages()}\n      <div style={{ height: \"100px\" }} />\n      <div className=\"message-form-container\">\n        <MessageForm {...props} chatId={activeChat} />\n      </div>\n    </div>\n  );\n};\n\nexport default ChatFeed;\n"]},"metadata":{},"sourceType":"module"}