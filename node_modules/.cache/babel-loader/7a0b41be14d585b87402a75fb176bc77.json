{"ast":null,"code":"\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\n\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\n\nconst EventHandlerNonNull = require(\"../generated/EventHandlerNonNull.js\");\n\nconst OnBeforeUnloadEventHandlerNonNull = require(\"../generated/OnBeforeUnloadEventHandlerNonNull.js\");\n\nconst OnErrorEventHandlerNonNull = require(\"../generated/OnErrorEventHandlerNonNull.js\");\n\nconst reportException = require(\"./runtime-script-errors\");\n\nexports.appendHandler = (el, eventName) => {\n  // tryImplForWrapper() is currently required due to use in Window.js\n  idlUtils.tryImplForWrapper(el).addEventListener(eventName, event => {\n    // https://html.spec.whatwg.org/#the-event-handler-processing-algorithm\n    const callback = exports.getCurrentEventHandlerValue(el, eventName);\n\n    if (callback === null) {\n      return;\n    }\n\n    const specialError = ErrorEvent.isImpl(event) && event.type === \"error\" && event.currentTarget.constructor.name === \"Window\";\n    let returnValue = null; // https://heycam.github.io/webidl/#es-invoking-callback-functions\n\n    if (typeof callback === \"function\") {\n      if (specialError) {\n        returnValue = callback.call(event.currentTarget, event.message, event.filename, event.lineno, event.colno, event.error);\n      } else {\n        returnValue = callback.call(event.currentTarget, event);\n      }\n    } // TODO: we don't implement BeforeUnloadEvent so we can't brand-check here\n\n\n    if (event.type === \"beforeunload\") {\n      if (returnValue !== null) {\n        event._canceledFlag = true;\n\n        if (event.returnValue === \"\") {\n          event.returnValue = returnValue;\n        }\n      }\n    } else if (specialError) {\n      if (returnValue === true) {\n        event._canceledFlag = true;\n      }\n    } else if (returnValue === false) {\n      event._canceledFlag = true;\n    }\n  });\n}; // \"Simple\" in this case means \"no content attributes involved\"\n\n\nexports.setupForSimpleEventAccessors = (prototype, events) => {\n  prototype._getEventHandlerFor = function (event) {\n    return this._eventHandlers ? this._eventHandlers[event] : undefined;\n  };\n\n  prototype._setEventHandlerFor = function (event, handler) {\n    if (!this._registeredHandlers) {\n      this._registeredHandlers = new Set();\n      this._eventHandlers = Object.create(null);\n    }\n\n    if (!this._registeredHandlers.has(event) && handler !== null) {\n      this._registeredHandlers.add(event);\n\n      exports.appendHandler(this, event);\n    }\n\n    this._eventHandlers[event] = handler;\n  };\n\n  for (const event of events) {\n    exports.createEventAccessor(prototype, event);\n  }\n}; // https://html.spec.whatwg.org/multipage/webappapis.html#getting-the-current-value-of-the-event-handler\n\n\nexports.getCurrentEventHandlerValue = (target, event) => {\n  const value = target._getEventHandlerFor(event);\n\n  if (!value) {\n    return null;\n  }\n\n  if (value.body !== undefined) {\n    let element, document, fn;\n\n    if (target.constructor.name === \"Window\") {\n      element = null;\n      document = idlUtils.implForWrapper(target.document);\n    } else {\n      element = target;\n      document = element.ownerDocument;\n    }\n\n    const {\n      body\n    } = value;\n    const formOwner = element !== null && element.form ? element.form : null;\n    const window = target.constructor.name === \"Window\" && target._document ? target : document.defaultView;\n\n    try {\n      // eslint-disable-next-line no-new-func\n      Function(body); // properly error out on syntax errors\n      // Note: this won't execute body; that would require `Function(body)()`.\n    } catch (e) {\n      if (window) {\n        reportException(window, e);\n      }\n\n      target._setEventHandlerFor(event, null);\n\n      return null;\n    } // Note: the with (window) { } is not necessary in Node, but is necessary in a browserified environment.\n\n\n    const createFunction = document.defaultView.Function;\n\n    if (event === \"error\" && element === null) {\n      const wrapperBody = document ? body + `\\n//# sourceURL=${document.URL}` : body; // eslint-disable-next-line no-new-func\n\n      fn = createFunction(\"window\", `with (window) { return function onerror(event, source, lineno, colno, error) {\n  ${wrapperBody}\n}; }`)(window);\n      fn = OnErrorEventHandlerNonNull.convert(fn);\n    } else {\n      const argNames = [];\n      const args = [];\n      argNames.push(\"window\");\n      args.push(window);\n\n      if (element !== null) {\n        argNames.push(\"document\");\n        args.push(idlUtils.wrapperForImpl(document));\n      }\n\n      if (formOwner !== null) {\n        argNames.push(\"formOwner\");\n        args.push(idlUtils.wrapperForImpl(formOwner));\n      }\n\n      if (element !== null) {\n        argNames.push(\"element\");\n        args.push(idlUtils.wrapperForImpl(element));\n      }\n\n      let wrapperBody = `\nreturn function on${event}(event) {\n  ${body}\n};`;\n\n      for (let i = argNames.length - 1; i >= 0; --i) {\n        wrapperBody = `with (${argNames[i]}) { ${wrapperBody} }`;\n      }\n\n      if (document) {\n        wrapperBody += `\\n//# sourceURL=${document.URL}`;\n      }\n\n      argNames.push(wrapperBody);\n      fn = createFunction(...argNames)(...args);\n\n      if (event === \"beforeunload\") {\n        fn = OnBeforeUnloadEventHandlerNonNull.convert(fn);\n      } else {\n        fn = EventHandlerNonNull.convert(fn);\n      }\n    }\n\n    target._setEventHandlerFor(event, fn);\n  }\n\n  return target._getEventHandlerFor(event);\n}; // https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes\n// TODO: Consider replacing this with `[ReflectEvent]`\n\n\nexports.createEventAccessor = (obj, event) => {\n  Object.defineProperty(obj, \"on\" + event, {\n    configurable: true,\n    enumerable: true,\n\n    get() {\n      return exports.getCurrentEventHandlerValue(this, event);\n    },\n\n    set(val) {\n      this._setEventHandlerFor(event, val);\n    }\n\n  });\n};","map":{"version":3,"sources":["/Users/kanavmittal/Downloads/Anonymous-Doubt-Session-Application-Ashank-App/node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js"],"names":["idlUtils","require","ErrorEvent","EventHandlerNonNull","OnBeforeUnloadEventHandlerNonNull","OnErrorEventHandlerNonNull","reportException","exports","appendHandler","el","eventName","tryImplForWrapper","addEventListener","event","callback","getCurrentEventHandlerValue","specialError","isImpl","type","currentTarget","constructor","name","returnValue","call","message","filename","lineno","colno","error","_canceledFlag","setupForSimpleEventAccessors","prototype","events","_getEventHandlerFor","_eventHandlers","undefined","_setEventHandlerFor","handler","_registeredHandlers","Set","Object","create","has","add","createEventAccessor","target","value","body","element","document","fn","implForWrapper","ownerDocument","formOwner","form","window","_document","defaultView","Function","e","createFunction","wrapperBody","URL","convert","argNames","args","push","wrapperForImpl","i","length","obj","defineProperty","configurable","enumerable","get","set","val"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst idlUtils = require(\"../generated/utils\");\nconst ErrorEvent = require(\"../generated/ErrorEvent\");\nconst EventHandlerNonNull = require(\"../generated/EventHandlerNonNull.js\");\nconst OnBeforeUnloadEventHandlerNonNull = require(\"../generated/OnBeforeUnloadEventHandlerNonNull.js\");\nconst OnErrorEventHandlerNonNull = require(\"../generated/OnErrorEventHandlerNonNull.js\");\nconst reportException = require(\"./runtime-script-errors\");\n\nexports.appendHandler = (el, eventName) => {\n  // tryImplForWrapper() is currently required due to use in Window.js\n  idlUtils.tryImplForWrapper(el).addEventListener(eventName, event => {\n    // https://html.spec.whatwg.org/#the-event-handler-processing-algorithm\n    const callback = exports.getCurrentEventHandlerValue(el, eventName);\n    if (callback === null) {\n      return;\n    }\n\n    const specialError = ErrorEvent.isImpl(event) && event.type === \"error\" &&\n      event.currentTarget.constructor.name === \"Window\";\n\n    let returnValue = null;\n    // https://heycam.github.io/webidl/#es-invoking-callback-functions\n    if (typeof callback === \"function\") {\n      if (specialError) {\n        returnValue = callback.call(\n          event.currentTarget,\n          event.message,\n          event.filename,\n          event.lineno,\n          event.colno,\n          event.error\n        );\n      } else {\n        returnValue = callback.call(event.currentTarget, event);\n      }\n    }\n\n    // TODO: we don't implement BeforeUnloadEvent so we can't brand-check here\n    if (event.type === \"beforeunload\") {\n      if (returnValue !== null) {\n        event._canceledFlag = true;\n        if (event.returnValue === \"\") {\n          event.returnValue = returnValue;\n        }\n      }\n    } else if (specialError) {\n      if (returnValue === true) {\n        event._canceledFlag = true;\n      }\n    } else if (returnValue === false) {\n      event._canceledFlag = true;\n    }\n  });\n};\n\n// \"Simple\" in this case means \"no content attributes involved\"\nexports.setupForSimpleEventAccessors = (prototype, events) => {\n  prototype._getEventHandlerFor = function (event) {\n    return this._eventHandlers ? this._eventHandlers[event] : undefined;\n  };\n\n  prototype._setEventHandlerFor = function (event, handler) {\n    if (!this._registeredHandlers) {\n      this._registeredHandlers = new Set();\n      this._eventHandlers = Object.create(null);\n    }\n\n    if (!this._registeredHandlers.has(event) && handler !== null) {\n      this._registeredHandlers.add(event);\n      exports.appendHandler(this, event);\n    }\n    this._eventHandlers[event] = handler;\n  };\n\n  for (const event of events) {\n    exports.createEventAccessor(prototype, event);\n  }\n};\n\n// https://html.spec.whatwg.org/multipage/webappapis.html#getting-the-current-value-of-the-event-handler\nexports.getCurrentEventHandlerValue = (target, event) => {\n  const value = target._getEventHandlerFor(event);\n  if (!value) {\n    return null;\n  }\n\n  if (value.body !== undefined) {\n    let element, document, fn;\n    if (target.constructor.name === \"Window\") {\n      element = null;\n      document = idlUtils.implForWrapper(target.document);\n    } else {\n      element = target;\n      document = element.ownerDocument;\n    }\n    const { body } = value;\n\n    const formOwner = element !== null && element.form ? element.form : null;\n    const window = target.constructor.name === \"Window\" && target._document ? target : document.defaultView;\n\n    try {\n      // eslint-disable-next-line no-new-func\n      Function(body); // properly error out on syntax errors\n      // Note: this won't execute body; that would require `Function(body)()`.\n    } catch (e) {\n      if (window) {\n        reportException(window, e);\n      }\n      target._setEventHandlerFor(event, null);\n      return null;\n    }\n\n    // Note: the with (window) { } is not necessary in Node, but is necessary in a browserified environment.\n\n    const createFunction = document.defaultView.Function;\n    if (event === \"error\" && element === null) {\n      const wrapperBody = document ? body + `\\n//# sourceURL=${document.URL}` : body;\n\n      // eslint-disable-next-line no-new-func\n      fn = createFunction(\"window\", `with (window) { return function onerror(event, source, lineno, colno, error) {\n  ${wrapperBody}\n}; }`)(window);\n\n      fn = OnErrorEventHandlerNonNull.convert(fn);\n    } else {\n      const argNames = [];\n      const args = [];\n\n      argNames.push(\"window\");\n      args.push(window);\n\n      if (element !== null) {\n        argNames.push(\"document\");\n        args.push(idlUtils.wrapperForImpl(document));\n      }\n      if (formOwner !== null) {\n        argNames.push(\"formOwner\");\n        args.push(idlUtils.wrapperForImpl(formOwner));\n      }\n      if (element !== null) {\n        argNames.push(\"element\");\n        args.push(idlUtils.wrapperForImpl(element));\n      }\n      let wrapperBody = `\nreturn function on${event}(event) {\n  ${body}\n};`;\n      for (let i = argNames.length - 1; i >= 0; --i) {\n        wrapperBody = `with (${argNames[i]}) { ${wrapperBody} }`;\n      }\n      if (document) {\n        wrapperBody += `\\n//# sourceURL=${document.URL}`;\n      }\n      argNames.push(wrapperBody);\n      fn = createFunction(...argNames)(...args);\n\n      if (event === \"beforeunload\") {\n        fn = OnBeforeUnloadEventHandlerNonNull.convert(fn);\n      } else {\n        fn = EventHandlerNonNull.convert(fn);\n      }\n    }\n\n    target._setEventHandlerFor(event, fn);\n  }\n\n  return target._getEventHandlerFor(event);\n};\n\n// https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes\n// TODO: Consider replacing this with `[ReflectEvent]`\nexports.createEventAccessor = (obj, event) => {\n  Object.defineProperty(obj, \"on\" + event, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return exports.getCurrentEventHandlerValue(this, event);\n    },\n    set(val) {\n      this._setEventHandlerFor(event, val);\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"script"}